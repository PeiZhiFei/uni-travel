import{m as e,a as t,c as s,w as i,z as a,A as o,B as l,C as r,D as n,b as c,d as h,g as d,E as u,G as p,x as g,H as m,J as f,K as y,L as k,i as v,o as w,j as b,S as C,k as I,l as M,q as T,r as D,F as S,u as x,y as P,t as _,I as N,v as F,p as V,M as R,N as L,O,P as B,n as A,Q as j}from"./index-DB7dG9rX.js";import{u as z}from"./global.DLFpaKax.js";import{_ as q}from"./_plugin-vue_export-helper.BCo6x5W8.js";const E=q({data:()=>({showTop:!0,load:!1,first:!0,setting:["点击锚定","清除收藏","清除图标","自动播放","导出收藏","切换模式","圆形图标","无网模式"],types:["0全部","1换票","2一卡通","7两星以上","3三星以上","6屏蔽零星","4小吃饭店","5我的收藏"],showPoi:!0,isJuhe:!1,clickScale:!0,rateColor:!0,noNet:!1,selectedName:"0全部",selectedSetting:"",showTypeDropdown:!1,showSettingDropdown:!1,longitude2:116.397029,latitude2:39.917839,hasLoaded:!1,showSearchResult:!1,searchResult:[],mapCtx:null,scale:14,overlayImage:{},nearbyPois:[],address:"",tags:[],items:[],items2:[],batchSize:0,currentBatch:1,totalBatches:10,viewport:{northeast:{latitude:0,longitude:0},southwest:{latitude:0,longitude:0}},imgUrls:[],current:0,indicatorDots:!1,autoplay:!1,interval:3e3,duration:300,circular:!0,hasVideo:!1,hasVideoReal:!1,showVideoPopup:!1,popupVideoSrc:"",autoVideo:!1,currentTime:0,enableVideo:!1,video:!1,tempMarkerImages:{},pendingMarkers:[],cachedData:[],unprocessedMarkers:[],isConnected:!0,inputValue:"",scrollTop:0}),computed:{...t(z,["myGlobalData"]),...e(z,["selectedPlace","filterItem","navIds","source","latitude","longitude","video","noNet"])},onShow(){this.processReq();const e=z();this.noNet=e.noNet,this.video=e.video},onLoad(e){this.netInit();const t=z(),s=t.myGlobalData?JSON.parse(JSON.stringify(t.myGlobalData)).reverse():[];this.items2=s;const i=h("favorites")||[];a("favorites",i),this.mapCtx=k("map",this);const o=h("markerCache")||{};this.cachedData=o},onReady(){this.load=!0,this.mapCtx&&this.mapCtx.initMarkerCluster&&this.mapCtx.initMarkerCluster({enableDefaultStyle:!0,zoomOnClick:!0,gridSize:20})},methods:{sliceFirst:e=>e?e.slice(1):"",isVideo:e=>e&&e.endsWith("mp4"),getTitle:e=>e&&e.length>6?e.slice(0,6):e,getPrice:e=>0==e||"0"==e?"免费":"元"==String(e).slice(-1)||String(e).length>3?e:e+"元",getType(e){if(!e)return"";switch(e[0]){case"a":return"人文·历史·大学";case"b":return"艺术·展馆·书苑";case"c":return"行业·科学·技术";case"d":return"寺庙·坛观·宗教";case"e":return"游乐·度假·表演";case"g":return"商场·商圈·零售";case"h":return"园区·大厦·酒店";case"i":return"公园·山水·自然";case"k":return"街道·美食·小吃";default:return""}},splitTime:e=>e?e.split("；"):[],netInit(){f({success:e=>{this.isConnected="none"!==e.networkType}}),y(e=>{this.isConnected=e.isConnected,e.isConnected?(c({title:"网络已恢复",icon:"none"}),this.clickScale=!0):(c({title:"网络已断开",icon:"none"}),this.clickScale=!1)})},processReq(){const e=z();this.checkTimeDifference()&&this.clearMarkerCache(),this.circleIcon();const t=e.selectedPlace,s=e.filterItem,i=e.navIds,a=e.source;if(i&&i.length>0)if(this.closeOverlay(),this.load||(this.isJuhe=!1,this.getLocalMarker(1)),s&&(this.selectedName="-"+s),"全部"==s)this.scale=this.scale-.5,this.selectedName="0全部";else{const e=this.items2.filter(e=>i.includes(e.title));this.items=[],this.showTypeDropdown=!1,this.showSettingDropdown=!1,this.$nextTick(()=>{this.items=e.map((e,t)=>this.getMarker(e,t,1));const t=e.map(e=>({latitude:Number(e.latitude),longitude:Number(e.longitude)}));t.length>0&&this.mapCtx.includePoints({points:t,padding:[100,50,30,50]})})}else if(t){"video"==a&&e.video?(this.autoVideo=!0,this.enableVideo=!0):this.autoVideo=!1,this.load||this.getLocalMarker(2),this.selectedName="0全部",this.longitude2=Number(t.longitude),this.latitude2=Number(t.latitude),this.processTag(t),this.items=[],this.closeOverlay(),this.addMarkerNot(t);const s={...t};s.isFav=this.isFavorites(s),this.overlayImage=s,this.imgPlay(s),this.processDis(s)}else this.first&&(this.load||(this.isJuhe=!0,this.getLocalMarker(5)),this.longitude2=116.397029,this.latitude2=39.917839,this.mapCtx.moveToLocation({longitude:116.397029,latitude:39.917839}),setTimeout(()=>{this.location()},900));this.first=!1},processTag(e){this.getType(e.type);let t=[];e.recomend&&(t=e.recomend.split("，"));const s=t.map(e=>({text:e,color:this.getRandomColor()}));this.tags=s},getLocalMarker(e){const t=this.initMarker();this.items2=t,this.selectedName=3==e?"3三星以上":5==e?"0全部":"-全部",this.showTypeDropdown=!1,this.showSettingDropdown=!1,this.filterItems(),this.closeOverlay()},initMarker(){return this.items2.map((e,t)=>this.getMarker(e,t,1))},getMarker(e,t,s){const i=this.isFavorites(e),a=this.hasCircle(e.title),o=this.noNet?"/static/images/m3.png":a?this.getCachedPath(e.title):e.img;return{...e,id:t,width:this.noNet?1:60,height:this.noNet?1:45,joinCluster:!1,alpha:1,isFav:i,iconPath:o,collision:"poi",callout:{content:e.title,color:1==s||i?"#555555":"#ffffff",fontSize:14,borderRadius:3,bgColor:1==s?i?"#f8bfbf":this.getColor(e):i?"#f8bfbf":"#2C8EF3",padding:8,display:"ALWAYS",anchorX:a?-9:0,anchorY:-2,borderWidth:.5,borderColor:"#ffffff"},latitude:Number(e.latitude),longitude:Number(e.longitude)}},getColor(e){if(!this.rateColor)return"#ffffff";if(e.type&&e.type.includes("v"))return"#f7f799";switch(Number(e.rate)){case 5:return"#FBE0AE";case 4:return"#bdf4c6";case 3:return"#A8ECFC";case 2:return"#D7D0F6";case 1:return"#E0E1E1";case 0:return"#C0C0C0";default:return"#ffffff"}},isFavorites:e=>(h("favorites")||[]).includes(e.title),getRandomColor(){let e="#";for(let t=0;t<6;t++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e},addMarkerNot(e){let t=[...this.items];if(!t.some(t=>t.title==e.title)){const s=this.items2.findIndex(t=>t.title===e.title);if(-1!==s){const i=this.getMarker(e,s,1);t.push(i),this.items=t}}this.processTag(e),this.getRgc(e),this.clickScale&&this.goTo(e),this.processDis(e)},goTo(e){this.mapCtx.moveToLocation({longitude:Number(e.longitude),latitude:Number(e.latitude)}),setTimeout(()=>{this.scale=14,this.longitude2=Number(e.longitude),this.latitude2=Number(e.latitude)},250)},onMarkerTap(e){const t=e.detail.markerId;this.onMarkerTap2(t)},onMarkerTap2(e){this.markerBigger(e);const t=this.items.find(t=>t.id==e);if(t){this.showSearchResult=!1,this.searchResult=[],this.showTypeDropdown=!1,this.showSettingDropdown=!1;const e={...t};e.isFav=this.isFavorites(e),t.title!==this.overlayImage.title&&(this.closeOverlay(),this.overlayImage=e,this.processTag(e),this.getRgc(e),this.imgPlay(e),this.processDis(e)),this.clickScale&&this.goTo(e),this.processDis(e)}},markerBigger(e){const t=this.items.findIndex(t=>t.id==e);if(-1!==t){const e=[...this.items];e[t].callout.fontSize=20,e[t].callout.bgColor="#f56343",e[t].callout.color="#fff",this.items=e,setTimeout(()=>{const e=[...this.items],s=e[t],i=this.isFavorites(s);e[t].callout.fontSize=14,e[t].callout.bgColor=i?"#f8bfbf":this.getColor(s),e[t].callout.color="#555555",this.items=e},500)}},closeOverlay(){this.tags=[],this.address="",this.overlayImage={},this.nearbyPois=[],this.hasLoaded=!1,this.imgUrls=[],this.current=0,this.autoplay=!1,this.hasVideo=!1,this.indicatorDots=!1,this.circular=!0,this.showVideoPopup=!1,this.popupVideoSrc="",this.currentTime=0,this.hasVideoReal=!1},onMapTap(){this.showTypeDropdown=!1,this.showSettingDropdown=!1,this.showSearchResult=!1,this.searchResult=[],this.showTop=!this.showTop,this.closeOverlay()},toggleSettingDropdown(){this.closeOverlay(),this.showSettingDropdown=!this.showSettingDropdown,this.showTypeDropdown=!1},toggleTypeDropdown(){this.closeOverlay(),this.showTypeDropdown=!this.showTypeDropdown,this.showSettingDropdown=!1},selectSetting(e){const t=this.setting[e];if("地图文字"==t)this.showPoi=!this.showPoi,this.showSettingDropdown=!1;else if("点击锚定"==t)this.showSettingDropdown=!1,this.clickScale=!this.clickScale;else if("圆形图标"==t)this.circleIcon();else if("清除图标"==t)this.showSettingDropdown=!1,this.clearMarkerCache();else if("无网模式"==t){z().noNet=!this.noNet,this.noNet=!this.noNet,this.showSettingDropdown=!1,this.clickScale=!1,this.getLocalMarker(5),this.filterItems(),setTimeout(()=>{this.mapCtx.moveToLocation({longitude:116.397029,latitude:39.917839}),this.scale=14,this.longitude2=116.397029,this.latitude2=39.917839},1e3)}else"清除收藏"==t&&(this.showSettingDropdown=!1,m({title:"提示",content:"确定要清除所有收藏吗？",success:e=>{e.confirm&&(n("favorites"),c({title:"收藏已清除",icon:"success"}))}}));this.selectedSetting=t},selectType(e){this.selectedName=this.types[e],this.showTypeDropdown=!1,this.preFilter()},preFilter(){"0全部"==this.selectedName?(this.scale=this.scale-.5,this.filterItems()):this.filterItems()},filterItems(){const{selectedName:e,items2:t}=this,s=t.filter(t=>0==Number(e[0])||"1"==e[0]&&t.price.includes("换票")||"2"==e[0]&&(t.price.includes("一卡通")||t.recomend.includes("一卡通"))||"3"==e[0]&&Number(t.rate)>2||"4"==e[0]&&t.type.includes("v")||"5"==e[0]&&(h("favorites")||[]).includes(t.title)||"6"==e[0]&&0!=t.rate||"7"==e[0]&&Number(t.rate)>1||t.type.includes(e[0]));this.items=[],this.batchSize=Math.ceil(s.length/this.totalBatches),this.currentBatch=1,this.loadBatchMarkers(s),setTimeout(()=>{const e=s.map(e=>({latitude:Number(e.latitude),longitude:Number(e.longitude)}));e.length>0&&this.mapCtx.includePoints({points:e,padding:[100,50,30,50]})},500)},loadBatchMarkers(e){const{items:t,batchSize:s,currentBatch:i,totalBatches:a}=this,o=(i-1)*s,l=o+s,r=e.slice(o,l).map((e,t)=>this.getMarker(e,o+t,1));this.items=t.concat(r),i<a&&(this.currentBatch=i+1,setTimeout(()=>{this.loadBatchMarkers(e)},50))},onSearchInput(e){const t=e.detail.value.trim();if(this.inputValue=t,t){const e=this.items2.filter(e=>e.title.includes(t)||e.recomend&&e.recomend.includes(t)||e.time&&e.time.includes(t)||e.price&&e.price.includes(t));this.showSearchResult=!0,this.searchResult=e,this.showTypeDropdown=!1,this.showSettingDropdown=!1,this.closeOverlay()}else this.showSearchResult=!1,this.searchResult=[]},onResultItemTap(e){const t=this.searchResult[e];t.isFav=this.isFavorites(t),this.hasLoaded=!1,this.address="",this.overlayImage=t,this.showSearchResult=!1,this.searchResult=[],this.longitude2=Number(t.longitude),this.latitude2=Number(t.latitude),this.addMarkerNot(t),this.imgPlay(t)},imgPlay(e){let t=[];e.video&&""!=e.video&&this.enableVideo?(t=[e.video,e.img],this.indicatorDots=!0,this.autoplay=!this.autoVideo,this.hasVideo=!0,this.popupVideoSrc=e.video):(t=[e.img],this.indicatorDots=!1,this.autoplay=!1,this.hasVideo=!1,this.popupVideoSrc=""),this.hasVideoReal=e.video&&e.video.length>0,this.popupVideoSrc=e.video,this.imgUrls=t},videoPlay(){this.autoplay=!1},videoPause(){this.autoplay=!this.autoVideo},videoTimeUpdate(e){this.currentTime=e.detail.currentTime},videoClick(e){this.showVideoPopup=!0},openVideoPopup(){this.showVideoPopup=!0},closeVideoPopup(){this.showVideoPopup=!1},previewImage(){this.hasLoaded&&g({urls:this.hasVideo?this.imgUrls.slice(1):this.imgUrls,current:this.hasVideo?this.current-1:this.current})},onImageLoad(){this.hasLoaded=!0},change(e){this.current=e.detail.current},toggleSwitch(){this.overlayImage.isFav?this.removeFromFavorites(this.overlayImage.title):this.addToFavorites(this.overlayImage.title)},addToFavorites(e){let t=h("favorites")||[];t.includes(e)||(t.push(e),a("favorites",t),c({title:"收藏成功",icon:"success"}),this.overlayImage.isFav=!0,this.updateMarkerAppearance(e,!0))},removeFromFavorites(e){let t=h("favorites")||[];const s=t.indexOf(e);-1!==s&&(t.splice(s,1),a("favorites",t),this.overlayImage.isFav=!1,this.updateMarkerAppearance(e,!1))},updateMarkerAppearance(e,t){const s=this.items.findIndex(t=>t.title==e);if(-1!==s){const e=[...this.items];e[s].isFav=t,e[s].callout.bgColor=t?"#f8bfbf":this.getColor(e[s]),e[s].callout.color="#555555",this.items=e}},copyName(){p({data:this.overlayImage.title,success:()=>c({title:"复制成功",icon:"success"})})},nav2(){this.mapCtx.openMapApp({latitude:Number(this.overlayImage.latitude),longitude:Number(this.overlayImage.longitude),destination:this.overlayImage.title,name:this.overlayImage.title,address:this.overlayImage.title})},detail(e){this.copyName2(e),uni.navigateToMiniProgram({appId:"wxde8ac0a21135c07d",path:"search/pages/before-search/before-search",envVersion:"release"})},biji(e){this.copyName2(e),uni.navigateToMiniProgram({appId:"wx734c1ad7b3562129",envVersion:"release"})},xiaochengxu(e){e&&uni.navigateToMiniProgram({appId:e,envVersion:"release"})},copyName2(e){p({data:e})},getRgc(e){u({url:"https://restapi.amap.com/v3/geocode/regeo",data:{location:`${e.longitude},${e.latitude}`,key:"cf030e2b684785e9fee97ec94536efff"},success:e=>{200===e.statusCode&&e.data.regeocode&&(this.address=e.data.regeocode.formatted_address)}})},processDis(e){const t=this.items2.map(t=>{const s=this.getDistance(parseFloat(e.latitude),parseFloat(e.longitude),parseFloat(t.latitude),parseFloat(t.longitude));return{...t,distance:s.toFixed(2)}}).filter(t=>t.title!=e.title).sort((e,t)=>e.distance-t.distance).slice(0,4);this.nearbyPois=t},getDistance(e,t,s,i){const a=(s-e)*Math.PI/180,o=(i-t)*Math.PI/180,l=Math.sin(a/2)*Math.sin(a/2)+Math.cos(e*Math.PI/180)*Math.cos(s*Math.PI/180)*Math.sin(o/2)*Math.sin(o/2);return 6371*(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)))*1e3},handleNearbyClick(e){this.longitude2=Number(e.longitude),this.latitude2=Number(e.latitude);const t={...e};t.isFav=this.isFavorites(t),this.closeOverlay(),this.overlayImage=t,this.processTag(t),this.getRgc(t),this.imgPlay(t),this.processDis(t)},location(){d({type:"gcj02",success:e=>{this.goTo(e)},fail:()=>{c({title:"定位失败",icon:"none"})}})},onRegionChange(e){"end"!==e.type||"gesture"!==e.causedBy&&"drag"!==e.causedBy||(this.closeOverlay(),this.showTypeDropdown=!1,this.showSettingDropdown=!1,this.showSearchResult=!1)},checkTimeDifference(){const e=h("startTime");if(!e)return!0;return(Date.now()-e)/864e5>=5},clearMarkerCache(){n("markerCache"),this.cachedData={},c({title:"缓存已清除",icon:"success"})},circleIcon(){this.showSettingDropdown=!1;const{items2:e,cachedData:t}=this,s=[...new Set(e.map(e=>e.title))];let i,o=t?Object.keys(t):[];i=o.length?s.filter(e=>!o.includes(e)):s,this.unprocessedMarkers=e.filter(e=>i.includes(e.title)),this.processMarkerQueue(),a("startTime",Date.now())},processMarkerQueue(){if(0===this.pendingMarkers.length){const e=this.unprocessedMarkers.splice(0,10);this.pendingMarkers=e}const e=this.pendingMarkers[0];e&&this.createRoundedMarker(e)},createRoundedMarker(e){const t=o("markerCanvas",this),s=20;t.beginPath(),t.arc(s,s,s,0,2*Math.PI),t.closePath(),t.clip(),l({src:e.img,success:i=>{const a=i.width/i.height;let o,l,n,c;a>1?(l=40,o=l*a,n=s-o/2,c=0):(o=40,l=o/a,n=0,c=s-l/2),t.drawImage(i.path,n,c,o,l),t.beginPath(),t.arc(s,s,s,0,2*Math.PI),t.setStrokeStyle("#fff"),t.setLineWidth(2),t.stroke(),t.draw(!1,()=>{r({canvasId:"markerCanvas",quality:.1,success:t=>{({...this.tempMarkerImages})[e.title]=t.tempFilePath,this.saveTempPathToStorage(e.title,t.tempFilePath),this.pendingMarkers=this.pendingMarkers.slice(1),this.processMarkerQueue()},fail:()=>{this.pendingMarkers=this.pendingMarkers.slice(1),this.processMarkerQueue()}},this)})},fail:()=>{this.pendingMarkers=this.pendingMarkers.slice(1),this.processMarkerQueue()}})},saveTempPathToStorage(e,t){const s={...this.cachedData,[e]:{tempFilePath:t}};this.cachedData=s,a("markerCache",s)},hasCircle(e){return!this.checkTimeDifference()&&null!=this.getCachedPath(e)},getCachedPath(e){const t=this.cachedData?this.cachedData[e]:null;return t&&t.tempFilePath?t.tempFilePath:null}}},[["render",function(e,t,a,o,l,r){const n=v,c=N,h=F,d=V,u=R,p=L,g=O,m=j,f=B,y=C;return w(),s(n,{class:"map-container"},{default:i(()=>[b(y,{"show-scrollbar":!1,"scroll-top":l.scrollTop,style:{height:"100vh",overflow:"hidden"},"scroll-y":"true"},{default:i(()=>[b(n,{class:"full-screen-container"},{default:i(()=>[l.showTop?(w(),s(n,{key:0,class:"search-container"},{default:i(()=>[b(n,{class:"dropdown"},{default:i(()=>[b(n,{class:"dropdown-header",style:{"background-color":"rgb(128, 114, 247)",height:"21px","line-height":"21px"},onClick:M(r.toggleSettingDropdown,["stop"])},{default:i(()=>[T("地图设置")]),_:1},8,["onClick"]),l.showSettingDropdown?(w(),s(n,{key:0,class:"dropdown-menu"},{default:i(()=>[(w(!0),D(S,null,x(l.setting,(e,t)=>(w(),s(n,{key:t,class:"dropdown-item",onClick:M(e=>r.selectSetting(t),["stop"]),style:P([{width:"60px"},{color:l.selectedSetting==l.setting[t]?"#f00":"#262727"}])},{default:i(()=>[T(_(e),1)]),_:2},1032,["onClick","style"]))),128))]),_:1})):I("",!0)]),_:1}),b(c,{placeholder:"搜索地点",class:"search-container-input",onInput:r.onSearchInput,value:l.inputValue},null,8,["onInput","value"]),b(n,{class:"dropdown"},{default:i(()=>[b(n,{class:"dropdown-header",onClick:M(r.toggleTypeDropdown,["stop"]),style:{height:"21px","line-height":"21px"}},{default:i(()=>[T(_(r.sliceFirst(l.selectedName)),1)]),_:1},8,["onClick"]),l.showTypeDropdown?(w(),s(n,{key:0,class:"dropdown-menu"},{default:i(()=>[(w(!0),D(S,null,x(l.types,(e,t)=>(w(),s(n,{key:t,class:"dropdown-item",onClick:M(e=>r.selectType(t),["stop"]),style:P([{width:"60px"},{color:l.types[t]==l.selectedName?"#ff0000":"#262727"}])},{default:i(()=>[T(_(r.sliceFirst(e)),1)]),_:2},1032,["onClick","style"]))),128))]),_:1})):I("",!0)]),_:1}),l.showSearchResult?(w(),s(n,{key:0,class:"search-result"},{default:i(()=>[(w(!0),D(S,null,x(l.searchResult,(e,t)=>(w(),s(n,{key:t,class:"result-item",onClick:e=>r.onResultItemTap(t)},{default:i(()=>[b(h,{src:e.img,mode:"aspectFill",class:"result-item-image has-shadow"},null,8,["src"]),b(d,{class:"result-item-text"},{default:i(()=>[T(_(e.title),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})):I("",!0)]),_:1})):I("",!0),b(u,{style:{width:"60px",height:"45px",position:"absolute",top:"-100px",left:"0"},"canvas-id":"markerCanvas"}),b(p,{id:"map",style:{width:"100vw",height:"100vh"},"enable-3d":!0,"enable-overlooking":!0,"enable-auto-max-overlooking":!0,markers:l.items,onMarkertap:r.onMarkerTap,"enable-marker-clustering":!0,"cluster-clickable":!0,onClick:r.onMapTap,onCallouttap:r.onMarkerTap,onRegionchange:r.onRegionChange,"enable-poi":l.showPoi,"enable-building":!0,"show-location":!0,scale:l.scale,longitude:l.longitude2,latitude:l.latitude2},null,8,["markers","onMarkertap","onClick","onCallouttap","onRegionchange","enable-poi","scale","longitude","latitude"]),l.showVideoPopup?(w(),s(n,{key:1,class:"video-popup"},{default:i(()=>[b(n,{class:"popup-mask",onClick:r.closeVideoPopup},null,8,["onClick"]),b(n,{class:"close-btn",onClick:r.closeVideoPopup},{default:i(()=>[T("关闭")]),_:1},8,["onClick"]),b(n,{class:"popup-content"},{default:i(()=>[b(g,{id:"popup-video",class:"video-cover-full",src:l.popupVideoSrc,autoplay:!0,controls:""},null,8,["src"])]),_:1})]),_:1})):I("",!0),l.overlayImage.title?(w(),s(n,{key:2,class:"overlay-content"},{default:i(()=>[b(n,{class:"container7"},{default:i(()=>[!l.noNet&&l.indicatorDots?(w(),s(f,{key:0,class:A(["swiper banner-container",l.hasLoaded?"has-shadow3":"noshadow"]),"indicator-dots":l.indicatorDots,autoplay:l.autoplay,interval:l.interval,duration:l.duration,"indicator-color":"#AAACAD","indicator-active-color":"#ffffff",circular:l.circular,"easing-function":"linear",current:l.current,onChange:r.change},{default:i(()=>[(w(!0),D(S,null,x(l.imgUrls,(e,t)=>(w(),s(m,{key:t},{default:i(()=>[l.hasVideo&&0==t?(w(),s(n,{key:0,style:{overflow:"hidden"}},{default:i(()=>[b(g,{id:"video",class:"bgimg3",src:e,"enable-progress-gesture":!0,muted:!0,"show-fullscreen-btn":!1,"show-center-play-btn":!0,"show-play-btn":!0,"show-bottom-progress":!1,autoplay:l.autoVideo,controls:!1,onClick:M(r.openVideoPopup,["stop"]),"picture-in-picture-mode":[],"show-pip-btn":!1,onPlay:r.videoPlay,onPause:r.videoPause,onTimeupdate:r.videoTimeUpdate},null,8,["src","autoplay","onClick","onPlay","onPause","onTimeupdate"])]),_:2},1024)):(w(),s(n,{key:1,style:{overflow:"hidden"}},{default:i(()=>[b(h,{mode:"aspectFill",class:A(["bgimg2",l.hasLoaded?"has-shadow5":"noshadow"]),onClick:M(r.previewImage,["stop"]),onLoad:r.onImageLoad,src:e},null,8,["class","onClick","onLoad","src"])]),_:2},1024))]),_:2},1024))),128))]),_:1},8,["class","indicator-dots","autoplay","interval","duration","circular","current","onChange"])):I("",!0),l.noNet||l.indicatorDots?I("",!0):(w(),s(h,{key:1,src:l.overlayImage.img,mode:"aspectFill",class:A(["bgimg22",l.hasLoaded?"has-shadow3":"noshadow"]),onClick:M(r.previewImage,["stop"]),onLoad:r.onImageLoad},null,8,["src","class","onClick","onLoad"]))]),_:1}),b(n,{class:"container4",onClick:r.closeOverlay},{default:i(()=>[l.overlayImage.officalId&&""!==l.overlayImage.officalId?(w(),s(n,{key:0,class:"container6",style:{width:"35px","justify-content":"left","text-align":"left","align-items":"flex-start","margin-top":"0px",position:"absolute",top:"8px",right:"8px"}},{default:i(()=>[b(h,{src:"https://open.weixin.qq.com/qr/code?username="+l.overlayImage.officalId,mode:"aspectFill",class:"overlay-image",onClick:t[0]||(t[0]=M(e=>r.xiaochengxu(l.overlayImage.appId),["stop"])),style:P(l.overlayImage.appId?"border: 1px solid #e6e6e6;":""),"show-menu-by-longpress":!0},null,8,["src","style"])]),_:1})):I("",!0),b(n,{class:"container5"},{default:i(()=>[b(d,{style:{"font-weight":"600","font-size":"14px","align-self":"center"},onClick:M(r.copyName,["stop"])},{default:i(()=>[T(_(l.overlayImage.title),1)]),_:1},8,["onClick"]),b(n,{class:"star-rating",style:{"align-self":"center"}},{default:i(()=>[(w(),D(S,null,x(5,(e,t)=>b(h,{key:t,src:t<l.overlayImage.rate?"/static/images/star-filled.png":"/static/images/star-empty.png",mode:"aspectFill"},null,8,["src"])),64))]),_:1}),b(n,{class:"container6",style:{"justify-content":"center","text-align":"center","align-items":"center"}},{default:i(()=>[b(n,{class:"container8",style:{"justify-content":"center","margin-top":"-3px"}},{default:i(()=>[l.video&&l.hasVideoReal?(w(),s(d,{key:0,class:"custom-button3",style:{"background-color":"rgb(230, 21, 73)"},onClick:M(r.videoClick,["stop"])},{default:i(()=>[T("视频")]),_:1},8,["onClick"])):I("",!0),b(d,{class:"custom-button3",style:{"background-color":"rgb(230, 146, 21)"},onClick:t[1]||(t[1]=M(e=>r.detail(l.overlayImage.title),["stop"]))},{default:i(()=>[T("详情")]),_:1}),b(d,{class:"custom-button3",style:{"background-color":"rgb(14, 190, 221)"},onClick:t[2]||(t[2]=M(e=>r.biji(l.overlayImage.title),["stop"]))},{default:i(()=>[T("笔记")]),_:1}),b(d,{onClick:M(r.nav2,["stop"]),class:"custom-button3",style:{"background-color":"rgb(128, 114, 247)",color:"white"}},{default:i(()=>[T("导航")]),_:1},8,["onClick"]),b(d,{onClick:M(r.toggleSwitch,["stop"]),class:A(["custom-button3",l.overlayImage.isFav?"switch-on":"switch-off"])},{default:i(()=>[T(_(l.overlayImage.isFav?"取消":"收藏"),1)]),_:1},8,["onClick","class"]),l.overlayImage.appId?(w(),s(d,{key:1,class:"custom-button3",style:{width:"42px","background-color":"rgb(13, 184, 22)"},onClick:t[3]||(t[3]=M(e=>r.xiaochengxu(l.overlayImage.appId),["stop"]))},{default:i(()=>[T("小程序")]),_:1})):I("",!0)]),_:1})]),_:1}),b(n,{class:"tag-container",style:{"align-self":"center","margin-top":"2px","margin-left":"2px"}},{default:i(()=>[(w(!0),D(S,null,x(l.tags,(e,t)=>(w(),s(n,{class:"tag",key:t},{default:i(()=>[T(_(e.text),1)]),_:2},1024))),128))]),_:1}),b(n,null,{default:i(()=>[b(n,{style:{display:"flex","flex-direction":"column","margin-left":"2px"}},{default:i(()=>[b(n,null,{default:i(()=>[b(n,{class:"left1"},{default:i(()=>[b(h,{src:"./static/images/a1.png",class:"ic1",style:{filter:"hue-rotate(335deg) saturate(200%) brightness(90%)"},mode:"aspectFill"}),b(d,{class:"left2",style:{color:"rgb(231, 22, 22)"}},{default:i(()=>[T(_(r.getPrice(l.overlayImage.price)),1)]),_:1})]),_:1}),""!=l.overlayImage.time?(w(),s(n,{key:0,class:"left1"},{default:i(()=>[b(h,{src:"./static/images/a8.png",class:"ic1",style:{filter:"hue-rotate(235deg) saturate(200%) brightness(90%)"},mode:"aspectFill"}),b(n,null,{default:i(()=>[(w(!0),D(S,null,x(r.splitTime(l.overlayImage.time),(e,t)=>(w(),s(n,{class:"time-container",style:{color:"rgb(36, 129, 216)"},key:t},{default:i(()=>[b(d,{class:"left2",style:{color:"rgb(36, 129, 216)"}},{default:i(()=>[T(_(e),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):I("",!0),""!=l.address?(w(),s(n,{key:1,class:"left1"},{default:i(()=>[b(h,{src:"./static/images/a5.png",class:"ic1",style:{filter:"hue-rotate(90deg) saturate(200%) brightness(90%)"},mode:"aspectFill"}),""!=l.address?(w(),s(d,{key:0,class:"left2",style:{color:"rgb(64, 167, 61)"}},{default:i(()=>[T(_(l.address),1)]),_:1})):I("",!0)]),_:1})):I("",!0)]),_:1})]),_:1}),l.nearbyPois.length>0?(w(),s(n,{key:0},{default:i(()=>[b(n,{class:"near-container",style:{"align-self":"center","margin-top":"8px"}},{default:i(()=>[(w(!0),D(S,null,x(l.nearbyPois,(e,t)=>(w(),s(n,{class:"near2",key:t,onClick:M(t=>r.handleNearbyClick(e),["stop"])},{default:i(()=>[l.noNet?I("",!0):(w(),s(h,{key:0,src:e.img,style:{"border-radius":"5px",width:"25px",height:"25px",margin:"3px"}},null,8,["src"])),b(d,null,{default:i(()=>[T(_(e.distance)+"m",1)]),_:2},1024),b(d,{style:{"padding-left":"3px","padding-right":"3px",height:"13px","align-self":"center"}},{default:i(()=>[T(_(r.getTitle(e.title)),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})):I("",!0)]),_:1})]),_:1})]),_:1},8,["onClick"])]),_:1})):I("",!0),b(h,{class:"back-to-top-btn",mode:"aspectFill",onClick:r.location,src:"./static/images/b2.png"},null,8,["onClick"])]),_:1})]),_:1},8,["scroll-top"])]),_:1})}],["__scopeId","data-v-f155384b"]]);export{E as default};
