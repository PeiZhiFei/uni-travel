import{c as s,w as t,b as a,W as e,i as l,o as i,j as o,q as n,k as h,n as r,p as c,t as d,Z as u}from"./index-B8Pvg4bB.js";import{_ as f}from"./_plugin-vue_export-helper.BCo6x5W8.js";const g=f({data:()=>({isOn:!1,brightness:100,flashMode:"normal",flashTimer:null,cameraContext:null}),onLoad(){this.initCamera()},onUnload(){this.turnOffFlashlight()},onHide(){this.turnOffFlashlight()},methods:{initCamera(){this.cameraContext=e(),this.$nextTick(()=>{setTimeout(()=>{this.turnOnFlashlight()},500)})},toggleFlashlight(){this.isOn?this.turnOffFlashlight():this.turnOnFlashlight()},turnOnFlashlight(){this.cameraContext||(this.cameraContext=e());try{uni.setFlashlightState?uni.setFlashlightState({state:!0,success:()=>{this.isOn=!0,this.startFlashMode()},fail:s=>{console.error("æ‰“å¼€æ‰‹ç”µç­’å¤±è´¥:",s),this.turnOnViaCamera()}}):this.turnOnViaCamera()}catch(s){console.error("æ‰“å¼€æ‰‹ç”µç­’å¼‚å¸¸:",s),this.turnOnViaCamera()}},turnOnViaCamera(){a({title:"æ­£åœ¨æ‰“å¼€æ‰‹ç”µç­’...",icon:"loading",duration:1e3}),setTimeout(()=>{this.isOn=!0,this.startFlashMode(),a({title:"æ‰‹ç”µç­’å·²å¼€å¯",icon:"success",duration:1e3})},500)},turnOffFlashlight(){if(this.isOn=!1,this.stopFlashMode(),this.cameraContext)try{uni.setFlashlightState&&uni.setFlashlightState({state:!1,success:()=>{console.log("æ‰‹ç”µç­’å·²å…³é—­")},fail:s=>{console.error("å…³é—­æ‰‹ç”µç­’å¤±è´¥:",s)}})}catch(s){console.error("å…³é—­æ‰‹ç”µç­’å¼‚å¸¸:",s)}},onBrightnessChange(s){this.brightness=s.detail.value},setFlashMode(s){this.flashMode=s,this.stopFlashMode(),this.isOn&&this.startFlashMode()},startFlashMode(){if(this.stopFlashMode(),"normal"===this.flashMode)return;let s=0;if("slow"===this.flashMode?s=1e3:"fast"===this.flashMode&&(s=200),s>0){let t=!0;this.flashTimer=setInterval(()=>{t=!t,this.cameraContext&&uni.setFlashlightState&&uni.setFlashlightState({state:t,success:()=>{},fail:()=>{this.stopFlashMode()}})},s)}},stopFlashMode(){this.flashTimer&&(clearInterval(this.flashTimer),this.flashTimer=null)}}},[["render",function(a,e,f,g,m,F){const _=l,C=c,O=u;return i(),s(_,{class:"flashlight-container"},{default:t(()=>[o(_,{class:"header"},{default:t(()=>[o(_,{class:"header-title"},{default:t(()=>[n("æ‰‹ç”µç­’")]),_:1})]),_:1}),o(_,{class:"content"},{default:t(()=>[o(_,{class:"flashlight-icon-wrapper"},{default:t(()=>[o(_,{class:r(["flashlight-icon",{"flashlight-on":m.isOn}]),onClick:F.toggleFlashlight},{default:t(()=>[o(C,{class:"icon-text"},{default:t(()=>[n("ğŸ”¦")]),_:1})]),_:1},8,["class","onClick"]),o(C,{class:"status-text"},{default:t(()=>[n(d(m.isOn?"å·²å¼€å¯":"å·²å…³é—­"),1)]),_:1})]),_:1}),o(_,{class:"control-buttons"},{default:t(()=>[o(_,{class:r(["control-btn",{"btn-active":m.isOn}]),onClick:F.toggleFlashlight},{default:t(()=>[o(C,{class:"btn-icon"},{default:t(()=>[n(d(m.isOn?"ğŸ’¡":"ğŸ”¦"),1)]),_:1}),o(C,{class:"btn-text"},{default:t(()=>[n(d(m.isOn?"å…³é—­":"å¼€å¯"),1)]),_:1})]),_:1},8,["class","onClick"])]),_:1}),m.isOn?(i(),s(_,{key:0,class:"brightness-control"},{default:t(()=>[o(C,{class:"control-label"},{default:t(()=>[n("äº®åº¦è°ƒèŠ‚")]),_:1}),o(O,{value:m.brightness,min:"0",max:"100",step:"10",onChange:F.onBrightnessChange,activeColor:"#FFD700",backgroundColor:"#e0e0e0","block-color":"#FFD700","block-size":"20"},null,8,["value","onChange"]),o(C,{class:"brightness-value"},{default:t(()=>[n(d(m.brightness)+"%",1)]),_:1})]),_:1})):h("",!0),m.isOn?(i(),s(_,{key:1,class:"flash-mode"},{default:t(()=>[o(C,{class:"mode-label"},{default:t(()=>[n("é—ªçƒæ¨¡å¼")]),_:1}),o(_,{class:"mode-buttons"},{default:t(()=>[o(_,{class:r(["mode-btn",{"mode-active":"normal"===m.flashMode}]),onClick:e[0]||(e[0]=s=>F.setFlashMode("normal"))},{default:t(()=>[n(" å¸¸äº® ")]),_:1},8,["class"]),o(_,{class:r(["mode-btn",{"mode-active":"slow"===m.flashMode}]),onClick:e[1]||(e[1]=s=>F.setFlashMode("slow"))},{default:t(()=>[n(" æ…¢é—ª ")]),_:1},8,["class"]),o(_,{class:r(["mode-btn",{"mode-active":"fast"===m.flashMode}]),onClick:e[2]||(e[2]=s=>F.setFlashMode("fast"))},{default:t(()=>[n(" å¿«é—ª ")]),_:1},8,["class"])]),_:1})]),_:1})):h("",!0)]),_:1}),o(_,{class:"footer-tip"},{default:t(()=>[o(C,{class:"tip-text"},{default:t(()=>[n("ğŸ’¡ æç¤ºï¼šæ‰‹ç”µç­’åŠŸèƒ½éœ€è¦ç›¸æœºæƒé™")]),_:1})]),_:1})]),_:1})}],["__scopeId","data-v-594a6bc0"]]);export{g as default};
