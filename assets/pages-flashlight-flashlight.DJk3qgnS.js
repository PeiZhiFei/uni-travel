import{c as s,w as t,H as a,W as l,i as e,o,j as i,q as n,k as h,X as c,n as r,p as f,t as d,Z as u}from"./index-ONQ8qMAl.js";import{_ as g}from"./_plugin-vue_export-helper.BCo6x5W8.js";const m=g({data:()=>({isOn:!1,brightness:100,flashMode:"normal",flashTimer:null,cameraContext:null,flash:"off"}),onLoad(){this.initCamera()},onUnload(){this.turnOffFlashlight()},onHide(){this.turnOffFlashlight()},methods:{initCamera(){this.cameraContext=l("flashlightCamera",this),this.$nextTick(()=>{setTimeout(()=>{this.turnOnFlashlight()},500)})},onCameraInit(){console.log("æ‘„åƒå¤´åˆå§‹åŒ–å®Œæˆ"),setTimeout(()=>{this.turnOnFlashlight()},300)},onCameraError(s){console.error("æ‘„åƒå¤´é”™è¯¯:",s),a({title:"æç¤º",content:"æ‘„åƒå¤´æ‰“å¼€å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç›¸æœºæƒé™",showCancel:!1})},toggleFlashlight(){this.isOn?this.turnOffFlashlight():this.turnOnFlashlight()},turnOnFlashlight(){if(this.flash="on",this.isOn=!0,this.startFlashMode(),this.cameraContext)try{uni.setFlashlightState&&uni.setFlashlightState({state:!0,success:()=>{console.log("æ‰‹ç”µç­’å·²å¼€å¯")},fail:s=>{console.log("ä½¿ç”¨cameraç»„ä»¶æ§åˆ¶é—ªå…‰ç¯:",s)}})}catch(s){console.log("ä½¿ç”¨cameraç»„ä»¶æ§åˆ¶é—ªå…‰ç¯:",s)}},turnOffFlashlight(){if(this.flash="off",this.isOn=!1,this.stopFlashMode(),this.cameraContext)try{uni.setFlashlightState&&uni.setFlashlightState({state:!1,success:()=>{console.log("æ‰‹ç”µç­’å·²å…³é—­")},fail:s=>{console.log("ä½¿ç”¨cameraç»„ä»¶æ§åˆ¶é—ªå…‰ç¯:",s)}})}catch(s){console.log("ä½¿ç”¨cameraç»„ä»¶æ§åˆ¶é—ªå…‰ç¯:",s)}},onBrightnessChange(s){this.brightness=s.detail.value},setFlashMode(s){this.flashMode=s,this.stopFlashMode(),this.isOn&&this.startFlashMode()},startFlashMode(){if(this.stopFlashMode(),"normal"===this.flashMode)return void(this.flash="on");let s=0;if("slow"===this.flashMode?s=1e3:"fast"===this.flashMode&&(s=200),s>0){let t=!0;this.flashTimer=setInterval(()=>{t=!t,this.flash=t?"on":"off",uni.setFlashlightState&&uni.setFlashlightState({state:t,success:()=>{},fail:()=>{this.stopFlashMode()}})},s)}},stopFlashMode(){this.flashTimer&&(clearInterval(this.flashTimer),this.flashTimer=null)}}},[["render",function(a,l,g,m,F,_){const C=e,b=c,M=f,O=u;return o(),s(C,{class:"flashlight-container"},{default:t(()=>[i(C,{class:"header"},{default:t(()=>[i(C,{class:"header-title"},{default:t(()=>[n("æ‰‹ç”µç­’")]),_:1})]),_:1}),i(C,{class:"content"},{default:t(()=>[i(b,{id:"flashlightCamera","device-position":"back",flash:F.flash,class:"hidden-camera",onError:_.onCameraError,onInitdone:_.onCameraInit},null,8,["flash","onError","onInitdone"]),i(C,{class:"flashlight-icon-wrapper"},{default:t(()=>[i(C,{class:r(["flashlight-icon",{"flashlight-on":F.isOn}]),onClick:_.toggleFlashlight},{default:t(()=>[i(M,{class:"icon-text"},{default:t(()=>[n("ğŸ”¦")]),_:1})]),_:1},8,["class","onClick"]),i(M,{class:"status-text"},{default:t(()=>[n(d(F.isOn?"å·²å¼€å¯":"å·²å…³é—­"),1)]),_:1})]),_:1}),i(C,{class:"control-buttons"},{default:t(()=>[i(C,{class:r(["control-btn",{"btn-active":F.isOn}]),onClick:_.toggleFlashlight},{default:t(()=>[i(M,{class:"btn-icon"},{default:t(()=>[n(d(F.isOn?"ğŸ’¡":"ğŸ”¦"),1)]),_:1}),i(M,{class:"btn-text"},{default:t(()=>[n(d(F.isOn?"å…³é—­":"å¼€å¯"),1)]),_:1})]),_:1},8,["class","onClick"])]),_:1}),F.isOn?(o(),s(C,{key:0,class:"brightness-control"},{default:t(()=>[i(M,{class:"control-label"},{default:t(()=>[n("äº®åº¦è°ƒèŠ‚")]),_:1}),i(O,{value:F.brightness,min:"0",max:"100",step:"10",onChange:_.onBrightnessChange,activeColor:"#FFD700",backgroundColor:"#e0e0e0","block-color":"#FFD700","block-size":"20"},null,8,["value","onChange"]),i(M,{class:"brightness-value"},{default:t(()=>[n(d(F.brightness)+"%",1)]),_:1})]),_:1})):h("",!0),F.isOn?(o(),s(C,{key:1,class:"flash-mode"},{default:t(()=>[i(M,{class:"mode-label"},{default:t(()=>[n("é—ªçƒæ¨¡å¼")]),_:1}),i(C,{class:"mode-buttons"},{default:t(()=>[i(C,{class:r(["mode-btn",{"mode-active":"normal"===F.flashMode}]),onClick:l[0]||(l[0]=s=>_.setFlashMode("normal"))},{default:t(()=>[n(" å¸¸äº® ")]),_:1},8,["class"]),i(C,{class:r(["mode-btn",{"mode-active":"slow"===F.flashMode}]),onClick:l[1]||(l[1]=s=>_.setFlashMode("slow"))},{default:t(()=>[n(" æ…¢é—ª ")]),_:1},8,["class"]),i(C,{class:r(["mode-btn",{"mode-active":"fast"===F.flashMode}]),onClick:l[2]||(l[2]=s=>_.setFlashMode("fast"))},{default:t(()=>[n(" å¿«é—ª ")]),_:1},8,["class"])]),_:1})]),_:1})):h("",!0)]),_:1}),i(C,{class:"footer-tip"},{default:t(()=>[i(M,{class:"tip-text"},{default:t(()=>[n("ğŸ’¡ æç¤ºï¼šæ‰‹ç”µç­’åŠŸèƒ½éœ€è¦ç›¸æœºæƒé™")]),_:1})]),_:1})]),_:1})}],["__scopeId","data-v-78a9aee8"]]);export{m as default};
