import{c as s,w as t,H as a,W as l,i as e,o,j as n,q as i,k as h,X as c,n as r,p as f,t as d,Z as u}from"./index-_A_dKq_U.js";import{_ as g}from"./_plugin-vue_export-helper.BCo6x5W8.js";const m=g({data:()=>({isOn:!1,brightness:100,flashMode:"normal",flashTimer:null,cameraContext:null,flash:"off"}),onLoad(){this.initCamera()},onUnload(){this.turnOffFlashlight()},onHide(){this.turnOffFlashlight()},methods:{initCamera(){if("function"!=typeof l)return console.warn("createCameraContext ä¸æ”¯æŒ"),void a({title:"æç¤º",content:"æ‰‹ç”µç­’åŠŸèƒ½åœ¨å½“å‰ç¯å¢ƒä¸‹ä¸å¯ç”¨ï¼Œè¯·ä½¿ç”¨æ‰‹æœºæµè§ˆå™¨æˆ–å°ç¨‹åºæ‰“å¼€",showCancel:!1});try{this.cameraContext=l("flashlightCamera",this)}catch(s){return console.error("åˆ›å»ºç›¸æœºä¸Šä¸‹æ–‡å¤±è´¥:",s),void a({title:"æç¤º",content:"æ— æ³•åˆå§‹åŒ–ç›¸æœºï¼Œè¯·æ£€æŸ¥ç›¸æœºæƒé™",showCancel:!1})}this.$nextTick(()=>{setTimeout(()=>{this.turnOnFlashlight()},500)})},onCameraInit(){console.log("æ‘„åƒå¤´åˆå§‹åŒ–å®Œæˆ"),setTimeout(()=>{this.turnOnFlashlight()},300)},onCameraError(s){console.error("æ‘„åƒå¤´é”™è¯¯:",s),a({title:"æç¤º",content:"æ‘„åƒå¤´æ‰“å¼€å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç›¸æœºæƒé™",showCancel:!1})},toggleFlashlight(){this.isOn?this.turnOffFlashlight():this.turnOnFlashlight()},turnOnFlashlight(){if(this.flash="on",this.isOn=!0,this.startFlashMode(),this.cameraContext&&"function"==typeof uni.setFlashlightState)try{uni.setFlashlightState({state:!0,success:()=>{console.log("æ‰‹ç”µç­’å·²å¼€å¯")},fail:s=>{console.log("ä½¿ç”¨cameraç»„ä»¶æ§åˆ¶é—ªå…‰ç¯:",s)}})}catch(s){console.log("ä½¿ç”¨cameraç»„ä»¶æ§åˆ¶é—ªå…‰ç¯:",s)}},turnOffFlashlight(){if(this.flash="off",this.isOn=!1,this.stopFlashMode(),this.cameraContext&&"function"==typeof uni.setFlashlightState)try{uni.setFlashlightState({state:!1,success:()=>{console.log("æ‰‹ç”µç­’å·²å…³é—­")},fail:s=>{console.log("ä½¿ç”¨cameraç»„ä»¶æ§åˆ¶é—ªå…‰ç¯:",s)}})}catch(s){console.log("ä½¿ç”¨cameraç»„ä»¶æ§åˆ¶é—ªå…‰ç¯:",s)}},onBrightnessChange(s){this.brightness=s.detail.value},setFlashMode(s){this.flashMode=s,this.stopFlashMode(),this.isOn&&this.startFlashMode()},startFlashMode(){if(this.stopFlashMode(),"normal"===this.flashMode)return void(this.flash="on");let s=0;if("slow"===this.flashMode?s=1e3:"fast"===this.flashMode&&(s=200),s>0){let t=!0;this.flashTimer=setInterval(()=>{if(t=!t,this.flash=t?"on":"off","function"==typeof uni.setFlashlightState)try{uni.setFlashlightState({state:t,success:()=>{},fail:()=>{this.stopFlashMode()}})}catch(s){console.log("é—ªçƒæ§åˆ¶å¤±è´¥:",s)}},s)}},stopFlashMode(){this.flashTimer&&(clearInterval(this.flashTimer),this.flashTimer=null)}}},[["render",function(a,l,g,m,F,C){const _=e,p=c,b=f,M=u;return o(),s(_,{class:"flashlight-container"},{default:t(()=>[n(_,{class:"header"},{default:t(()=>[n(_,{class:"header-title"},{default:t(()=>[i("æ‰‹ç”µç­’")]),_:1})]),_:1}),n(_,{class:"content"},{default:t(()=>[n(p,{id:"flashlightCamera","device-position":"back",flash:F.flash,class:"hidden-camera",onError:C.onCameraError,onInitdone:C.onCameraInit},null,8,["flash","onError","onInitdone"]),n(_,{class:"flashlight-icon-wrapper"},{default:t(()=>[n(_,{class:r(["flashlight-icon",{"flashlight-on":F.isOn}]),onClick:C.toggleFlashlight},{default:t(()=>[n(b,{class:"icon-text"},{default:t(()=>[i("ğŸ”¦")]),_:1})]),_:1},8,["class","onClick"]),n(b,{class:"status-text"},{default:t(()=>[i(d(F.isOn?"å·²å¼€å¯":"å·²å…³é—­"),1)]),_:1})]),_:1}),n(_,{class:"control-buttons"},{default:t(()=>[n(_,{class:r(["control-btn",{"btn-active":F.isOn}]),onClick:C.toggleFlashlight},{default:t(()=>[n(b,{class:"btn-icon"},{default:t(()=>[i(d(F.isOn?"ğŸ’¡":"ğŸ”¦"),1)]),_:1}),n(b,{class:"btn-text"},{default:t(()=>[i(d(F.isOn?"å…³é—­":"å¼€å¯"),1)]),_:1})]),_:1},8,["class","onClick"])]),_:1}),F.isOn?(o(),s(_,{key:0,class:"brightness-control"},{default:t(()=>[n(b,{class:"control-label"},{default:t(()=>[i("äº®åº¦è°ƒèŠ‚")]),_:1}),n(M,{value:F.brightness,min:"0",max:"100",step:"10",onChange:C.onBrightnessChange,activeColor:"#FFD700",backgroundColor:"#e0e0e0","block-color":"#FFD700","block-size":"20"},null,8,["value","onChange"]),n(b,{class:"brightness-value"},{default:t(()=>[i(d(F.brightness)+"%",1)]),_:1})]),_:1})):h("",!0),F.isOn?(o(),s(_,{key:1,class:"flash-mode"},{default:t(()=>[n(b,{class:"mode-label"},{default:t(()=>[i("é—ªçƒæ¨¡å¼")]),_:1}),n(_,{class:"mode-buttons"},{default:t(()=>[n(_,{class:r(["mode-btn",{"mode-active":"normal"===F.flashMode}]),onClick:l[0]||(l[0]=s=>C.setFlashMode("normal"))},{default:t(()=>[i(" å¸¸äº® ")]),_:1},8,["class"]),n(_,{class:r(["mode-btn",{"mode-active":"slow"===F.flashMode}]),onClick:l[1]||(l[1]=s=>C.setFlashMode("slow"))},{default:t(()=>[i(" æ…¢é—ª ")]),_:1},8,["class"]),n(_,{class:r(["mode-btn",{"mode-active":"fast"===F.flashMode}]),onClick:l[2]||(l[2]=s=>C.setFlashMode("fast"))},{default:t(()=>[i(" å¿«é—ª ")]),_:1},8,["class"])]),_:1})]),_:1})):h("",!0)]),_:1}),n(_,{class:"footer-tip"},{default:t(()=>[n(b,{class:"tip-text"},{default:t(()=>[i("ğŸ’¡ æç¤ºï¼šæ‰‹ç”µç­’åŠŸèƒ½éœ€è¦ç›¸æœºæƒé™")]),_:1})]),_:1})]),_:1})}],["__scopeId","data-v-4aae4d26"]]);export{m as default};
